<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>标签: TODO - BurgessX&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="BurgessX&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="BurgessX&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="BurgessX&#039;s Blog"><meta property="og:url" content="https://burgessx.github.io/"><meta property="og:site_name" content="BurgessX&#039;s Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://burgessx.github.io/img/og_image.png"><meta property="article:author" content="BurgessX"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://burgessx.github.io"},"headline":"BurgessX's Blog","image":["https://burgessx.github.io/img/og_image.png"],"author":{"@type":"Person","name":"BurgessX"},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/github.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">BurgessX</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">标签</a></li><li class="is-active"><a href="#" aria-current="page">TODO</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-03-02T04:22:19.370Z" title="2021/3/2 下午12:22:19">2021-03-02</time>发表</span><span class="level-item"><time dateTime="2021-03-03T09:27:11.124Z" title="2021/3/3 下午5:27:11">2021-03-03</time>更新</span><span class="level-item">11 分钟读完 (大约1620个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/03/02/1222.html">ROS 学习笔记</a></h1><div class="content"><h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">roscore	# 启动ros</span><br><span class="line">	</span><br><span class="line">rospack find [package_name]		# 返回软件包的所在路径</span><br><span class="line"></span><br><span class="line">roscd [locationname[/subdir]]	# 切换目录（cd）到某个软件包或者软件包集当中</span><br><span class="line"><span class="meta">#</span><span class="bash"> 注意：roscd只能切换到那些路径已经包含在ROS_PACKAGE_PATH环境变量中的软件包</span></span><br><span class="line">echo $ROS_PACKAGE_PATH			# 查看 ROS_PACKAGE_PATH 中包含的路径。</span><br><span class="line"><span class="meta">#</span><span class="bash"> 输出结果：每个路径之间用冒号（:）分隔开来</span></span><br><span class="line">roscd log	# 进入日志目录</span><br><span class="line"></span><br><span class="line">rosls [locationname[/subdir]]	# 直接按软件包的名称执行 ls 命令（而不必输入绝对路径）</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 脚本执行命令</span></span><br><span class="line">source &lt;dir&gt;/setup.*sh	# 读取脚本中的命令，并在当前shell中执行（无需执行权限）</span><br><span class="line">. &lt;dir&gt;/setup.*sh		# 同上</span><br><span class="line">sh &lt;dir&gt;/setup.*sh		# 打开一个subshell，读取并执行脚本中的命令（无需执行权限）</span><br><span class="line">./&lt;dir&gt;/setup.*sh		# 打开一个subshell，并执行脚本中的命令（需要有执行权限）</span><br><span class="line"></span><br><span class="line">catkin_make</span><br><span class="line">catkin_make install  # （可选）</span><br><span class="line">catkin_create_pkg &lt;package_name&gt; [depend1] [depend2] [depend3]	# 创建包</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 节点</span></span><br><span class="line">rosnode list			# 列出当前运行的节点</span><br><span class="line">rosnode info /node_name	# 显示节点/node_name的信息</span><br><span class="line">rosnode ping /node_name</span><br><span class="line">rosnode kill /node_name	# 杀死进程</span><br><span class="line">rosnode cleanup			# 清除无效进程？</span><br><span class="line"></span><br><span class="line">rosrun [package_name] [node_name]</span><br><span class="line"><span class="meta">#</span><span class="bash"> 例如 rosrun turtlesim turtlesim_node</span></span><br><span class="line">rosrun [package_name] [node_name] ————name:=&lt;customized_name&gt;	# 运行并自定义节点名字</span><br><span class="line">rosrun rqt_graph rqt_graph		# 用图形显示当前运行的节点和话题</span><br><span class="line">rosrun rqt_console rqt_console	# 连接到了ROS的日志框架，以显示节点的输出信息</span><br><span class="line">rosrun rqt_logger_level rqt_logger_level	# 允许我们在节点运行时改变输出信息的详细级别</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 话题</span></span><br><span class="line">rostopic bw		# display bandwidth used by topic</span><br><span class="line">rostopic delay	# display delay of topic from timestamp in header</span><br><span class="line">rostopic echo /topic_name	# print messages to screen</span><br><span class="line">rostopic find	# find topics by type</span><br><span class="line">rostopic hz		# display publishing rate of topic    </span><br><span class="line">rostopic info	# print information about active topic</span><br><span class="line">rostopic list	# list active topics</span><br><span class="line">rostopic pub [topic] [msg_type] [args]	# publish data to topic</span><br><span class="line"><span class="meta">#</span><span class="bash"> 例：rostopic pub -1 /turtle1/cmd_vel geometry_msgs/Twist --</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="string">&#x27;[2.0, 0.0, 0.0]&#x27;</span> <span class="string">&#x27;[0.0, 0.0, 1.8]&#x27;</span></span></span><br><span class="line">rostopic type	# print topic or field type</span><br><span class="line"></span><br><span class="line">rosmsg show [pkg/msg]					# 查看消息的详细信息（数据结构）。可以不含包前缀来查找</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 服务</span></span><br><span class="line">rosservice list         			# 输出活跃服务的信息</span><br><span class="line">rosservice call [service] [args] 	# 用给定的参数调用服务</span><br><span class="line">rosservice type [service]			# 输出服务的类型</span><br><span class="line">rosservice find         			# 按服务的类型查找服务</span><br><span class="line">rosservice uri          			# 输出服务的ROSRPC uri</span><br><span class="line"></span><br><span class="line">rossrv show [pkg/srv]					# 输出服务的详细信息（数据结构）。可以不含包前缀来查找</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 参数服务器</span></span><br><span class="line">rosparam set [param_name] [value]  		# 设置参数</span><br><span class="line">rosparam get [param_name]				# 获取参数</span><br><span class="line">rosparam get /							# 获取参数服务器上所有参数的值</span><br><span class="line">rosparam load [file_name] [namespace]  	# 从文件中加载参数</span><br><span class="line">rosparam dump [file_name] [namespace]   # 向文件中转储参数</span><br><span class="line">rosparam delete [param_name]    		# 删除参数</span><br><span class="line">rosparam list           				# 列出参数名</span><br><span class="line"></span><br><span class="line">roslaunch [package] [filename.launch]	# roslaunch命令会自动查找经过的包并检测可用的启动文件</span><br><span class="line"></span><br><span class="line">rosed [package_name] [filename]			# 直接通过软件包名编辑包中的文件（rosed默认的编辑器是vim）</span><br></pre></td></tr></table></figure>

<h1 id="计算图"><a href="#计算图" class="headerlink" title="计算图"></a>计算图</h1><p><a target="_blank" rel="noopener" href="http://wiki.ros.org/cn/ROS/Concepts#ROS.2Bi6F7l1b.2BXEJrIQ-">计算图（Computation Graph）</a>是一个由ROS进程组成的点对点网络，它们能够共同处理数据。ROS的基本计算图概念有节点（Nodes）、主节点（Master）、参数服务器（Parameter Server）、消息（Messages）、服务（Services）、话题（Topics）和袋（Bags），它们都以不同的方式向图（Graph）提供数据。</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/Nodes">节点（Nodes）</a>：节点是一个可执行文件，它可以通过ROS来与其他节点进行通信。</li>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/Messages">消息（Messages）</a>：订阅或发布话题时所使用的ROS数据类型。</li>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/Topics">话题（Topics）</a>：节点可以将消息<em>发布</em>到话题，或通过<em>订阅</em>话题来接收消息。</li>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/Master">主节点（Master）</a>：ROS的命名服务，例如帮助节点发现彼此。</li>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/rosout">rosout</a>：在ROS中相当于<code>stdout/stderr（标准输出/标准错误）</code>。</li>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/roscore">roscore</a>：主节点 + rosout + [参数服务器](<a target="_blank" rel="noopener" href="http://wiki.ros.org/Parameter">http://wiki.ros.org/Parameter</a> Server)（会在以后介绍）。</li>
</ul>
<h1 id="msg和srv"><a href="#msg和srv" class="headerlink" title="msg和srv"></a>msg和srv</h1><ul>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/msg">msg</a>（消息）：msg文件就是文本文件，用于描述ROS消息的字段。它们用于为不同编程语言编写的消息生成源代码。</li>
<li><a target="_blank" rel="noopener" href="http://wiki.ros.org/srv">srv</a>（服务）：一个srv文件描述一个服务。它由两部分组成：请求（request）和响应（response）。</li>
</ul>
<p>msg文件存放在软件包的<code>msg</code>目录下，srv文件则存放在<code>srv</code>目录下。</p>
<p>msg文件就是简单的文本文件，每行都有一个字段类型和字段名称。srv文件和msg文件一样，只是它们包含两个部分：请求和响应。这两部分用一条<code>---</code>线隔开。</p>
<h2 id="msg和srv的一般步骤"><a href="#msg和srv的一般步骤" class="headerlink" title="msg和srv的一般步骤"></a>msg和srv的一般步骤</h2><p>如果没做过上面的教程，请先修改下<code>CMakeLists.txt</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># generate_messages(</span><br><span class="line">#   DEPENDENCIES</span><br><span class="line"># #  std_msgs  # Or other packages containing msgs</span><br><span class="line"># )</span><br></pre></td></tr></table></figure>

<p>取消注释，然后添加任意你的消息用到的包含<code>.msg</code>文件的软件包（本例中为<code>std_msgs</code>），如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">generate_messages(</span><br><span class="line">  DEPENDENCIES</span><br><span class="line">  std_msgs</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>现在我们已经创建了一些新消息，所以需要重新<code>make</code>一下软件包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># In your catkin workspace</span><br><span class="line">$ roscd beginner_tutorials</span><br><span class="line">$ cd ..&#x2F;..</span><br><span class="line">$ catkin_make</span><br><span class="line">$ cd -</span><br></pre></td></tr></table></figure>

<p><code>msg</code>目录中的任何<code>.msg</code>文件都将生成所有支持语言的代码。C++消息的头文件将生成在<code>~/catkin_ws/devel/include/beginner_tutorials/</code>。Python脚本将创建在<code>~/catkin_ws/devel/lib/python2.7/dist-packages/beginner_tutorials/msg</code>。而Lisp文件则出现在<code>~/catkin_ws/devel/share/common-lisp/ros/beginner_tutorials/msg/</code>。</p>
<p>类似地，<code>srv</code>目录中的任何<code>.srv</code>文件都将生成支持语言的代码。对于C++，头文件将生成在消息的头文件的同一目录中。对于Python和Lisp，会在<code>msg</code>目录旁边的<code>srv</code>目录中。</p>
<h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><h2 id="rosdep"><a href="#rosdep" class="headerlink" title="rosdep"></a>rosdep</h2><p>运行<code>rospack depends1 beginner_tutorials </code>后报错：<code>[rospack] Error: no such package beginner_tutorials</code>。原因是没有安装<code>rosdep</code>。这个包好像是可以方便解决软件包依赖问题的，我在安装后再<code>apt install ros-noetic-desktop-full</code>后提示会移除<code>rosdep</code>，再查官方文档，知道这是个额外的包</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="http://wiki.ros.org/cn/ROS/Tutorials/">http://wiki.ros.org/cn/ROS/Tutorials/</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-02-05T13:36:10.413Z" title="2021/2/5 下午9:36:10">2021-02-05</time>发表</span><span class="level-item"><time dateTime="2021-03-03T09:22:08.025Z" title="2021/3/3 下午5:22:08">2021-03-03</time>更新</span><span class="level-item">几秒读完 (大约65个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/02/05/2136.html">Github Pages 创建</a></h1><div class="content"><h1 id="代码高亮工具"><a href="#代码高亮工具" class="headerlink" title="代码高亮工具"></a>代码高亮工具</h1><ul>
<li><p>Jekyll自带的</p>
</li>
<li><p>Pygments</p>
</li>
<li><p>Rouge（Jekyll默认）</p>
</li>
<li><p>Highlight JS</p>
<ul>
<li>兼容 Rouge 与 Pygments。</li>
</ul>
</li>
<li><p>SyntaxHighlighter</p>
</li>
<li><p>Prismjs</p>
<ul>
<li>Jekyll 并不能直接支持他，需要下载 <strong>prism.rb</strong> 插件来使用。下载后拷贝到项目“<strong>_plugins</strong>“ 文件夹中。</li>
</ul>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-31T11:37:50.496Z" title="2021/1/31 下午7:37:50">2021-01-31</time>发表</span><span class="level-item"><time dateTime="2021-03-03T09:28:31.550Z" title="2021/3/3 下午5:28:31">2021-03-03</time>更新</span><span class="level-item">15 分钟读完 (大约2309个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/31/1937.html">SLAM 学习笔记</a></h1><div class="content"><p>视觉SLAM十四讲</p>
<p>从理论到实践</p>
<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>困难之处</p>
<ul>
<li>三维空间的运动</li>
<li>受到噪声影响</li>
<li>数据来源只有图像</li>
<li>人类看到的是图像，计算机看到的是数值矩阵</li>
</ul>
<p>从学习角度来看</p>
<ul>
<li>牵涉到的理论太广</li>
<li>从理论到实现困难</li>
<li>资料缺乏</li>
</ul>
<p>需要的知识</p>
<ul>
<li>机器人学</li>
<li>计算机视觉</li>
<li>状态估计（有噪声）</li>
<li>计算机科学（写代码来实现）</li>
</ul>
<p>预备知识</p>
<ul>
<li>数学：高等数学、线性代数（矩阵论）、概率论</li>
<li>编程：C++、Linux，了解语法和基本命令即可</li>
<li>不提供windows环境下的方案</li>
</ul>
<p>推荐书籍</p>
<ul>
<li>The Bible: Multiple View Geometry in Computer Vision</li>
<li>State Estimation for Robotics: A Matric-Lie-Group Approach</li>
<li>Probabilistic Robotics</li>
</ul>
<h1 id="第二讲-初识SLAM"><a href="#第二讲-初识SLAM" class="headerlink" title="第二讲 初识SLAM"></a>第二讲 初识SLAM</h1><p>两类传感器</p>
<ul>
<li>二维码marker</li>
<li>GPS</li>
<li>导轨、磁条</li>
</ul>
<p>携带于机器人本体上的</p>
<ul>
<li>IMU</li>
<li>激光</li>
<li>相机</li>
</ul>
<p>SLAM强调未知环境，更重视携带式传感器</p>
<p>相机分类</p>
<ul>
<li>单目：Monocular，通过移动相机估计深度（Moving View Stereo）</li>
<li>双目：Stereo，通过视差计算深度</li>
<li>深度：RGBD，通过物理方法（TOF、结构光）直接测量深度</li>
<li>其他：鱼眼、全景、Event Camera，etc.</li>
</ul>
<p>单目估计深度的方法：运动起来后，近处的物体运动快，远处的物体运动慢</p>
<p>双目相机：通过左右眼的微小差异判断远近，远处的物体变化小，近处的物体变化大</p>
<p>深度相机特点：深度值较准确；量程小；易受干扰</p>
<p>视觉SLAM框架</p>
<ul>
<li>前端：VO</li>
<li>后端：Optimization</li>
<li>回环检测：Loop Closing</li>
<li>建图：Mapping</li>
</ul>
<img src="E:\Typora_img\SLAM\image-20210131202747893.png" alt="image-20210131202747893" style="zoom:50%;" />

<p>视觉里程计</p>
<ul>
<li>相邻图像估计相机运动</li>
<li>基本形式：通过两张图像计算运动和结构</li>
<li>不可避免地有漂移</li>
<li>方法<ul>
<li>特征点法</li>
<li>直接法</li>
</ul>
</li>
</ul>
<p>后端优化</p>
<ul>
<li>从带有噪声的数据中优化轨迹和地图（状态估计问题）</li>
<li>最大后验概率估计（MAP）</li>
<li>方法：前期以EKF为代表，现在以图优化为代表</li>
</ul>
<p>回环检测</p>
<ul>
<li>检测机器人是否回到早先位置</li>
<li>识别到达过的场景</li>
<li>计算图像间的相似性</li>
<li>方法：词袋模型</li>
</ul>
<p>建图</p>
<ul>
<li>用于导航、规划、通讯、可视化、交互等</li>
<li>度量地图 vs 拓扑地图</li>
<li>稀疏地图 vs 稠密地图</li>
</ul>
<p>数学描述</p>
<ul>
<li>离散时间</li>
<li>位置x</li>
<li>路标y</li>
<li>噪声v</li>
<li>观测z</li>
</ul>
<img src="E:\Typora_img\SLAM\image-20210131204650917.png" alt="image-20210131204650917" style="zoom:50%;" />





<p>用g++或gcc编译：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ main.cpp -o helloSLAM</span><br></pre></td></tr></table></figure>

<p>运行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./helloSLAM</span><br></pre></td></tr></table></figure>

<p>用g++来编译很麻烦，所以一般<strong>新建CMakeLists.txt文件，采用cmake生成一个工程，产生MakeFile等文件，再用make命令来编译。</strong></p>
<p>创建CMakeLists.txt</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmake .</span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<p>因为编译会生成许多中间文件，我们不想要，所以可以新建一个build文件夹，进入此文件夹，然后</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cmake ..</span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<p>这样cmake生成的临时文件和make生成的可执行文件都会放到build文件夹下。</p>
<h2 id="IDE-KDevelop"><a href="#IDE-KDevelop" class="headerlink" title="IDE: KDevelop"></a>IDE: KDevelop</h2><p>KDevelop可以很方便地编译cmake工程，因此这里假设我们的C++工程中已经创建好了CMakeLists.txt文件。</p>
<h3 id="打开工程"><a href="#打开工程" class="headerlink" title="打开工程"></a>打开工程</h3><p>点击Project-&gt;Open/Import Project，然后选择CMakeLists.txt文件即可自动创建工程。</p>
<p>创建工程后会自动将工程添加到Project视图的Build Sequence下。</p>
<h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>编译有多种方法：</p>
<ul>
<li>点击Build会按顺序执行Build Sequence下的项目，该队列可以自行增删和调序。</li>
<li>选中项目，点击Build Selection图标（在Projects Tool Bar中，空白处右键可调出）<strong>理论上</strong>即可编译选中的项目。<ul>
<li>但实测发现在Build Sequence中有项目时，Build Selection按钮和Build按钮一样会把Build Sequence下的项目全部编译。</li>
</ul>
</li>
<li>选中项目，右键点击Build即可编译指定项目。</li>
</ul>
<h3 id="启动配置"><a href="#启动配置" class="headerlink" title="启动配置"></a>启动配置</h3><p>Run-&gt;Configure Launches-&gt;Add New，即可对项目新建自定义的启动配置，包括选择可执行文件、行为和依赖。</p>
<p>这一步可不配置按默认。如果有多个可执行文件的话可以配置一下要执行的可执行文件。</p>
<h3 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h3><p>两种方法：</p>
<ul>
<li><p>Run-&gt;Current Launch Configuration，选中要执行的项目，然后点Execute执行。</p>
</li>
<li><p>在Project视图中选中要执行的项目，右键Execute As-&gt;Compiled Binary。</p>
</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>全部用右键的方法最直接了。</p>
<h1 id="三维空间刚体运动"><a href="#三维空间刚体运动" class="headerlink" title="三维空间刚体运动"></a>三维空间刚体运动</h1><p>旋转矩阵、变换矩阵、四元数、欧拉角</p>
<p>Eigen库</p>
<h2 id="旋转矩阵"><a href="#旋转矩阵" class="headerlink" title="旋转矩阵"></a>旋转矩阵</h2><p>旋转矩阵R</p>
<ul>
<li>正交</li>
<li>行列式为1</li>
</ul>
<p>特殊正交群</p>
<h2 id="变换矩阵"><a href="#变换矩阵" class="headerlink" title="变换矩阵"></a>变换矩阵</h2><p>变换矩阵T、齐次坐标</p>
<p>特殊欧式群</p>
<h2 id="EIGEN的矩阵运算库"><a href="#EIGEN的矩阵运算库" class="headerlink" title="EIGEN的矩阵运算库"></a>EIGEN的矩阵运算库</h2><p>EIGEN：C++的矩阵运算库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libeigen3-dev</span><br></pre></td></tr></table></figure>



<p>/usr/include/eigen3</p>
<p>没有库，只是头文件(所以不用链接到库文件（函数的实现）！)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include_directories( &quot;&#x2F;usr&#x2F;include&#x2F;eigen3&quot; )</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Eigen::Matrix&lt;double, 3, 3&gt; R1_33</span><br><span class="line">Eigen::Matrix3f R2_33	&#x2F;&#x2F; float型3×3矩阵</span><br><span class="line">Eigen::Vector3d v1		&#x2F;&#x2F; 3×1向量</span><br></pre></td></tr></table></figure>

<p>注意：矩阵的变量类型要一样才能乘，比如double不能乘float</p>
<ul>
<li>QR分解求矩阵的逆。比直接求逆快一些。</li>
</ul>
<h2 id="角轴或轴角或旋转向量"><a href="#角轴或轴角或旋转向量" class="headerlink" title="角轴或轴角或旋转向量"></a>角轴或轴角或旋转向量</h2><p>罗德里格斯公式：RF公式</p>
<p><img src="E:\Typora_img\SLAM\image-20210201152028806.png" alt="image-20210201152028806"></p>
<p><img src="E:\Typora_img\SLAM\image-20210201152045318.png" alt="image-20210201152045318"></p>
<p> Rn=n：</p>
<ul>
<li><p>n绕自己转还是自己。</p>
</li>
<li><p>看成特征方程，特征值为1</p>
</li>
</ul>
<h2 id="欧拉角"><a href="#欧拉角" class="headerlink" title="欧拉角"></a>欧拉角</h2><p>分类</p>
<ul>
<li><p>定轴、动轴</p>
</li>
<li><p>顺序：X-Y-Z等</p>
</li>
</ul>
<p>问题：万向锁（Gimbal Lock）</p>
<ul>
<li>第二次旋转如果是正负90度，则第三次旋转和第一次旋转实际上是绕同一个轴，使得系统丢失了一个自由度，这说明欧拉角会存在奇异性问题</li>
</ul>
<h2 id="四元数"><a href="#四元数" class="headerlink" title="四元数"></a>四元数</h2><p>四元数是复数的一种扩展，有三个虚部，可以表达三维空间中的旋转</p>
<p>四元数可以转换成角轴、旋转矩阵、欧拉角</p>
<p>四元数旋转一个空间点：p=[0,x,y,z]，经过变换q，成了p’</p>
<p>$p’=qpq^{-1}$</p>
<h2 id="EIGEN的几何模块"><a href="#EIGEN的几何模块" class="headerlink" title="EIGEN的几何模块"></a>EIGEN的几何模块</h2><p>乘法可以不同维度。</p>
<p>四元数三个虚部在前。</p>
<p>可以用pangolin可视化</p>
<p>需要GLEW依赖：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libglew-dev</span><br></pre></td></tr></table></figure>

<h1 id="李群与李代数"><a href="#李群与李代数" class="headerlink" title="李群与李代数"></a>李群与李代数</h1><p>直接优化旋转矩阵很困难，参数耦合，李代数为无约束的优化。</p>
<h2 id="群"><a href="#群" class="headerlink" title="群"></a>群</h2><p>群是一种集合加上一种运算的代数结构（抽象代数知识）</p>
<p>性质（充要条件）</p>
<ul>
<li>封闭性</li>
<li>结合律</li>
<li>幺元</li>
<li>逆</li>
</ul>
<p>“凤姐咬你”</p>
<p>可以验证</p>
<p>旋转矩阵集合和矩阵乘法构成群</p>
<p>变换矩阵集合和矩阵乘法构成群</p>
<p>SO(3)和SE(3)都是群</p>
<h2 id="李群"><a href="#李群" class="headerlink" title="李群"></a>李群</h2><ul>
<li>具有连续（光滑）性质的群</li>
<li>既是群也是流形</li>
<li>SO(3)和SE(3)都是李群</li>
<li>但是SO(3)和SE(3)只有定义良好的乘法，没有加法，所以难以进行取极限、求导等连续操作</li>
</ul>
<h2 id="李代数"><a href="#李代数" class="headerlink" title="李代数"></a>李代数</h2><p>李群和李代数是一一对应的关系</p>
<p>性质</p>
<ul>
<li>封闭性</li>
<li>双线性</li>
<li>自反性</li>
<li>雅可比等价</li>
</ul>
<p>三维空间向量+叉积运算 构成李代数</p>
<p>所以so(3)也是李代数</p>
<p>李括号运算</p>
<p>se(3)也满足李代数性质</p>
<p>李代数可以理解成向量或矩阵形式</p>
<h2 id="指数映射和对数映射"><a href="#指数映射和对数映射" class="headerlink" title="指数映射和对数映射"></a>指数映射和对数映射</h2><p>指数映射：罗德里格斯公式</p>
<p>对数映射</p>
<p>se(3)到SE(3)的指数映射</p>
<p><img src="E:\Typora_img\SLAM\image-20210202151232224.png" alt="image-20210202151232224"></p>
<h2 id="李代数求导与扰动模型"><a href="#李代数求导与扰动模型" class="headerlink" title="李代数求导与扰动模型"></a>李代数求导与扰动模型</h2><p><img src="E:\Typora_img\SLAM\image-20210202152259671.png" alt="image-20210202152259671"></p>
<p>扰动模型更简洁、实用</p>
<p>推导用到了：泰勒展开、叉乘和反对称矩阵的关系</p>
<h2 id="SOPHUS库"><a href="#SOPHUS库" class="headerlink" title="SOPHUS库"></a>SOPHUS库</h2><p>不需要make install</p>
<p>最好make install</p>
<p>sophus库分为无模板和模板两种版本。</p>
<p>ch4/useSophus/CMakeList.txt文件修改如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cmake_minimum_required( VERSION 2.8 )</span><br><span class="line">project( useSophus )</span><br><span class="line"></span><br><span class="line">include_directories( &quot;&#x2F;usr&#x2F;include&#x2F;eigen3&#x2F;&quot; )</span><br><span class="line">include_directories( &quot;&#x2F;usr&#x2F;local&#x2F;include&#x2F;sophus&#x2F;&quot; )	# 这里是头文件</span><br><span class="line"></span><br><span class="line">add_executable( useSophus useSophus.cpp )</span><br><span class="line"></span><br><span class="line">target_link_libraries( useSophus &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;libSophus.so&quot; )# 这里是链接到函数的实现</span><br></pre></td></tr></table></figure>

<p>在Sophus中，se(3)的平移在前，旋转在后.</p>
<h1 id="相机与图像"><a href="#相机与图像" class="headerlink" title="相机与图像"></a>相机与图像</h1><h2 id="相机模型"><a href="#相机模型" class="headerlink" title="相机模型"></a>相机模型</h2><p>齐次坐标：与距离无关</p>
<p>单目：小孔成像</p>
<p>畸变</p>
<ul>
<li>径向畸变</li>
<li>切向畸变</li>
</ul>
<p>双目：通过视距可测距离</p>
<p>RGB-D</p>
<p>原理：</p>
<ul>
<li>ToF：面光、红外光；玻璃测不到</li>
<li>结构光：</li>
</ul>
<h2 id="OpenCV图像处理库"><a href="#OpenCV图像处理库" class="headerlink" title="OpenCV图像处理库"></a>OpenCV图像处理库</h2><p>可参考：<a target="_blank" rel="noopener" href="https://docs.opencv.org/master/d7/d9f/tutorial_linux_install.html">https://docs.opencv.org/master/d7/d9f/tutorial_linux_install.html</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libopencv-dev	# 二进制安装</span><br></pre></td></tr></table></figure>

<p>3.1.0</p>
<p>/usr/local/</p>
<h2 id="点云工具"><a href="#点云工具" class="headerlink" title="点云工具"></a>点云工具</h2><p>libpcl-dev：pcl库</p>
<p>pcl-tools：包含pcl可视化</p>
<h1 id="非线性优化"><a href="#非线性优化" class="headerlink" title="非线性优化"></a>非线性优化</h1><h2 id="状态估计问题"><a href="#状态估计问题" class="headerlink" title="状态估计问题"></a>状态估计问题</h2><ul>
<li>线性系统，高斯噪声</li>
<li>非线性系统，非高斯噪声</li>
</ul>
<p>历史上用滤波器</p>
<p>近年用非线性优化</p>
<p>最大后验估计</p>
<p>最大似然估计</p>
<p>最速下降法（一阶）、牛顿法（二阶）</p>
<p>高斯牛顿法：JT J近似H</p>
<p>LM方法：</p>
<h2 id="CERES"><a href="#CERES" class="headerlink" title="CERES"></a>CERES</h2><p>google的库</p>
<p>网站：ceres sover</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir build</span><br><span class="line">cd build</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure>



<h2 id="G2O"><a href="#G2O" class="headerlink" title="G2O"></a>G2O</h2></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-27T09:54:59.929Z" title="2021/1/27 下午5:54:59">2021-01-27</time>发表</span><span class="level-item"><time dateTime="2021-03-03T09:19:54.442Z" title="2021/3/3 下午5:19:54">2021-03-03</time>更新</span><span class="level-item">7 分钟读完 (大约1062个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/27/1754.html">Git 学习笔记</a></h1><div class="content"><blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/">https://www.liaoxuefeng.com/</a></p>
</blockquote>
<h1 id="Git简介"><a href="#Git简介" class="headerlink" title="Git简介"></a>Git简介</h1><h2 id="Git的特点"><a href="#Git的特点" class="headerlink" title="Git的特点"></a>Git的特点</h2><ul>
<li>Git是一种分布式版本控制系统（区别于集中式）。</li>
<li>在Git的版本管理中，文件的创建、修改、删除都被Git处理为“修改”。Git管理的是修改，而非文件。</li>
</ul>
<h1 id="Git上手"><a href="#Git上手" class="headerlink" title="Git上手"></a>Git上手</h1><h2 id="安装-Git"><a href="#安装-Git" class="headerlink" title="安装 Git"></a>安装 Git</h2><p>首先从<a target="_blank" rel="noopener" href="https://git-scm.com/">Git官网</a>下载安装包，安装完成后，打开Git Bash，输入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;Your Name&quot;</span><br><span class="line">git config --global user.email &quot;email@example.com&quot;</span><br></pre></td></tr></table></figure>

<h2 id="创建版本库"><a href="#创建版本库" class="headerlink" title="创建版本库"></a>创建版本库</h2><ol>
<li><p>首先创建并进入文件夹</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir learngit</span><br><span class="line">cd learngit</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过<code>git init</code>命令把这个目录变成Git可以管理的仓库</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="添加文件"><a href="#添加文件" class="headerlink" title="添加文件"></a>添加文件</h2><ol>
<li><p>将文件（假如叫*.txt）放到文件夹下，然后在该文件夹下执行</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add *.txt</span><br></pre></td></tr></table></figure>

<p> 也可以同时添加多个文件或分多次添加多个文件。</p>
</li>
<li><p>提交文件，并添加更新内容的说明</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m &quot;I wrote a file named *.txt&quot;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="时光机穿梭"><a href="#时光机穿梭" class="headerlink" title="时光机穿梭"></a>时光机穿梭</h1><h2 id="更新文档"><a href="#更新文档" class="headerlink" title="更新文档"></a>更新文档</h2><p>修改完文档后，重复“<a href="#%E6%B7%BB%E5%8A%A0%E6%96%87%E4%BB%B6">添加文件</a>”小节中的步骤即可更新修改内容到版本库。</p>
<p>另外，使用命令<code>git status</code>可以查看版本库的<a href="#%E5%B7%A5%E4%BD%9C%E5%8C%BA%E5%92%8C%E6%9A%82%E5%AD%98%E5%8C%BA">暂存区</a>的当前状态，命令<code>git diff</code>可以查看修改的内容。</p>
<h2 id="版本找回"><a href="#版本找回" class="headerlink" title="版本找回"></a>版本找回</h2><p>每次执行<code>git commit</code>都会提交一个新的版本，使用<code>git log</code>可以查看最近的三个版本记录，<code>git log --pretty=oneline</code>可以简化输出。</p>
<p>回退到上一个版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure>

<p>回退到上上个版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^^</span><br></pre></td></tr></table></figure>

<p>回退100个版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD~100</span><br></pre></td></tr></table></figure>

<p>上面的例子说明<code>HEAD</code>（其实是一个指针）就是当前版本。</p>
<p>也可直接跳到指定版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard id</span><br></pre></td></tr></table></figure>

<p>其中<code>id</code>可以使用命令<code>git reflog</code>查看（<code>id</code>没必要写全，写前几位就行）。该命令记录了每一次版本更换命令。</p>
<h2 id="工作区、暂存区和主存区"><a href="#工作区、暂存区和主存区" class="headerlink" title="工作区、暂存区和主存区"></a>工作区、暂存区和主存区</h2><p>如图，<code>git add</code>命令会将<strong>工作区（Working Directory）</strong>的文件添加到版本库的<strong>暂存区（stage）</strong>处，而<code>git commit</code>命令会将暂存区的文件添加到<strong>主存区（master）</strong>处（姑且这么叫吧）。</p>
<p><img src="E:\Typora_img\Git学习\0" alt="工作区和暂存区"></p>
<p><img src="E:\Typora_img\Git学习\git-command.jpg" alt="img"></p>
<p>另外可以发现，在一般情况下，工作区和主存区的文件树都是相对完整的，而暂存区只有部分文件。</p>
<h2 id="版本丢弃"><a href="#版本丢弃" class="headerlink" title="版本丢弃"></a>版本丢弃</h2><p><img src="E:\Typora_img\Git学习\1352126739_7909.jpg" alt="img"></p>
<h3 id="丢弃工作区的改动"><a href="#丢弃工作区的改动" class="headerlink" title="丢弃工作区的改动"></a>丢弃工作区的改动</h3><p>当执行 <code>git checkout .</code>或者<code>git checkout -- &lt;file&gt;</code>命令时，会用暂存区全部或指定的文件替换工作区的文件。<strong>这个操作很危险，会清除工作区中未添加到暂存区的改动。</strong></p>
<h3 id="丢弃暂存区的改动"><a href="#丢弃暂存区的改动" class="headerlink" title="丢弃暂存区的改动"></a>丢弃暂存区的改动</h3><p>命令<code>git reset HEAD &lt;file&gt;</code>可以把暂存区的指定文件<code>&lt;file&gt;</code>的修改撤销，重新放回工作区（unstage），这时候工作区的<code>&lt;file&gt;</code>的内容也会被修改，我们再使用<code>git checkout -- &lt;file&gt;</code>命令即可把工作区<code>&lt;file&gt;</code>的修改给丢弃掉，恢复工作区的状态。这样两步实现了暂存区指定文件<code>&lt;file&gt;</code>的丢弃。</p>
<p>也可以用<code>git rm --cached &lt;file&gt;</code>命令一步就把文件的修改信息从暂存区删除而不改变工作区。</p>
<p>如果暂存库的修改内容已经用<code>git commit</code>命令提交到本地版本库了，可以参考<a href="#%E7%89%88%E6%9C%AC%E6%89%BE%E5%9B%9E">版本找回</a>一节回退版本；若推送到了远程库则无法回退。</p>
<h3 id="丢弃工作区和暂存区的改动"><a href="#丢弃工作区和暂存区的改动" class="headerlink" title="丢弃工作区和暂存区的改动"></a>丢弃工作区和暂存区的改动</h3><p>当执行<code>git checkout HEAD .</code>或者<code>git checkout HEAD &lt;file&gt;</code>命令时，会用 HEAD 指向的 master 分支中的全部或者部分文件替换暂存区和以及工作区中的文件。<strong>这个命令也是极具危险性的，因为不但会清除工作区中未提交的改动，也会清除暂存区中未提交的改动。</strong></p>
<h2 id="文件删除"><a href="#文件删除" class="headerlink" title="文件删除"></a>文件删除</h2></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-24T08:20:15.978Z" title="2021/1/24 下午4:20:15">2021-01-24</time>发表</span><span class="level-item"><time dateTime="2021-03-03T09:25:29.763Z" title="2021/3/3 下午5:25:29">2021-03-03</time>更新</span><span class="level-item">1 小时读完 (大约7190个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/24/1620.html">Shell脚本命令学习</a></h1><div class="content"><blockquote>
<p>本文参考<a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-shell.html">菜鸟教程</a></p>
</blockquote>
<h1 id="Shell-简介"><a href="#Shell-简介" class="headerlink" title="Shell 简介"></a>Shell 简介</h1><h2 id="Shell-类型"><a href="#Shell-类型" class="headerlink" title="Shell 类型"></a>Shell 类型</h2><ul>
<li>Bourne Shell（/usr/bin/sh或/bin/sh）</li>
<li>Bourne Again Shell（/bin/bash）</li>
<li>C Shell（/usr/bin/csh）</li>
<li>Korn Shell（/usr/bin/ksh）</li>
<li>Shell for Root（/sbin/sh）</li>
</ul>
<p><strong>Linux操作系统缺省的shell是Bourne  Again  shell</strong>，它是Bourne  shell的扩展，简称Bash，与Bourne  shell完全向后兼容，并且在Bourne  shell的基础上增加、增强了很多特性。Bash放在/bin/bash中，它有许多特色，可以提供如命令补全、命令编辑和命令历史表等功能，它还包含了很多C  shell和Korn  shell中的优点，有灵活和强大的编程接口，同时又有很友好的用户界面。</p>
<p>查看当前的shell：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $SHELL</span><br></pre></td></tr></table></figure>

<h1 id="第一个-shell-脚本"><a href="#第一个-shell-脚本" class="headerlink" title="第一个 shell 脚本"></a>第一个 shell 脚本</h1><p>用vim打开新建文档test.sh：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim test.sh</span><br></pre></td></tr></table></figure>

<p>输入以下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash	<span class="comment"># “#!”是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种 Shell。sh和bash都可以。</span></span></span><br><span class="line">echo &quot;Hello World!&quot;	# 向窗口输出文本</span><br></pre></td></tr></table></figure>

<p>进入命令模式，:wq保存退出后，执行（以sh解释器为例，bash解释器同理）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh .&#x2F;test.sh</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh test.sh</span><br></pre></td></tr></table></figure>

<p>或直接指定解释器运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;bin&#x2F;sh test.sh</span><br></pre></td></tr></table></figure>

<p>用这种方式运行的脚本，不需要在第一行指定解释器信息，写了也没用。</p>
<h2 id="sh-和-bash-命令的区别"><a href="#sh-和-bash-命令的区别" class="headerlink" title="sh 和 bash 命令的区别"></a>sh 和 bash 命令的区别</h2><blockquote>
<p>引用链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37687594/article/details/109005613">Linux中的Shell bash和sh区别</a></p>
</blockquote>
<p>sh跟bash的区别是：sh开启了<strong>POSIX模式</strong>，而bash没有。sh 遵循<strong>POSIX规范：“当某行代码出错时，不继续往下解释”</strong>。bash 就算出错，也会继续向下执行。</p>
<blockquote>
<p>POSIX表示可移植操作系统接口（Portable Operating System Interface of UNIX，缩写为 POSIX ）。POSIX标准意在期望获得源代码级别的软件可移植性。换句话说，为一个POSIX兼容的操作系统编写的程序，应该可以在任何其它的POSIX操作系统上编译执行。</p>
</blockquote>
<p>简单说，sh是bash的一种特殊的模式，sh就是开启了POSIX标准的bash，<code>/bin/sh</code>相当于<code>/bin/bash --posix</code>。</p>
<p>在Linux系统上<code>/bin/sh</code>往往是指向<code>/bin/bash</code>的符号链接，即</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s &#x2F;bin&#x2F;bash &#x2F;bin&#x2F;sh</span><br></pre></td></tr></table></figure>

<h1 id="Shell-注释"><a href="#Shell-注释" class="headerlink" title="Shell 注释"></a>Shell 注释</h1><h2 id="单行注释"><a href="#单行注释" class="headerlink" title="单行注释"></a>单行注释</h2><p>以#开头的行就是注释，会被解释器忽略。</p>
<h2 id="多行注释"><a href="#多行注释" class="headerlink" title="多行注释"></a>多行注释</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:&lt;&lt;Symbol</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">注释内容...</span><br><span class="line">Symbol</span><br></pre></td></tr></table></figure>

<p>其中Symbol可以替换成任意字符或字符串。</p>
<h1 id="Shell-命令"><a href="#Shell-命令" class="headerlink" title="Shell 命令"></a>Shell 命令</h1><h2 id="help-命令"><a href="#help-命令" class="headerlink" title="help 命令"></a>help 命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">help [-dms] [pattern ...]</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>output short description for each topic</td>
</tr>
<tr>
<td>-m</td>
<td>display usage in pseudo-manpage format</td>
</tr>
<tr>
<td>-s</td>
<td>output only a short usage synopsis for each topic matching PATTERN</td>
</tr>
</tbody></table>
<h2 id="Shell-命令一览"><a href="#Shell-命令一览" class="headerlink" title="Shell 命令一览"></a>Shell 命令一览</h2><blockquote>
<p>引用链接：<a target="_blank" rel="noopener" href="https://www.jb51.net/article/128918.htm">详解shell中source、sh、bash、./执行脚本的区别</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>Shell命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>:</td>
<td>空，永远返回为true</td>
</tr>
<tr>
<td>.</td>
<td>从当前shell中执行操作</td>
</tr>
<tr>
<td>break</td>
<td>退出for、while、until或case语句</td>
</tr>
<tr>
<td>cd</td>
<td>改变到当前目录</td>
</tr>
<tr>
<td>continue</td>
<td>执行循环的下一步</td>
</tr>
<tr>
<td>echo</td>
<td>反馈信息到标准输出</td>
</tr>
<tr>
<td>eval</td>
<td>读取参数，执行结果命令</td>
</tr>
<tr>
<td>exec</td>
<td>执行命令，但不在当前shell</td>
</tr>
<tr>
<td>exit</td>
<td>退出当前shell</td>
</tr>
<tr>
<td>export</td>
<td>导出变量，使当前shell可利用它（导出成全局变量）</td>
</tr>
<tr>
<td>pwd</td>
<td>显示当前目录</td>
</tr>
<tr>
<td>read</td>
<td>从标准输入读取一行文本</td>
</tr>
<tr>
<td>readonly</td>
<td>使变量只读</td>
</tr>
<tr>
<td>return</td>
<td>退出函数并带有返回值</td>
</tr>
<tr>
<td>set</td>
<td>控制各种参数到标准输出的显示</td>
</tr>
<tr>
<td>shift</td>
<td>命令行参数向左偏移一个</td>
</tr>
<tr>
<td>test</td>
<td>评估条件表达式</td>
</tr>
<tr>
<td>times</td>
<td>显示shell运行过程的用户和系统时间</td>
</tr>
<tr>
<td>trap</td>
<td>当捕获信号时运行指定命令</td>
</tr>
<tr>
<td>ulimit</td>
<td>显示或设置shell资源</td>
</tr>
<tr>
<td>umask</td>
<td>显示或设置缺省文件创建模式</td>
</tr>
<tr>
<td>unset</td>
<td>从shell内存中删除变量或函数</td>
</tr>
<tr>
<td>wait</td>
<td>等待直到子进程运行完毕</td>
</tr>
</tbody></table>
<h2 id="echo-命令"><a href="#echo-命令" class="headerlink" title="echo 命令"></a>echo 命令</h2><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><table>
<thead>
<tr>
<th>可选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-n</td>
<td>不加换行符</td>
</tr>
<tr>
<td>-e</td>
<td>使能对反斜杠转义符的解释</td>
</tr>
<tr>
<td>-E</td>
<td>禁止对反斜杠转义符的解释</td>
</tr>
</tbody></table>
<h3 id="字符转义"><a href="#字符转义" class="headerlink" title="字符转义"></a>字符转义</h3><p>执行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">help echo</span><br></pre></td></tr></table></figure>

<p>即可看到所有能转义的字符</p>
<table>
<thead>
<tr>
<th>能转义的字符</th>
<th>转义后的作用</th>
</tr>
</thead>
<tbody><tr>
<td><code>\a</code></td>
<td>alert (bell)</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>suppress further output</td>
</tr>
<tr>
<td><code>\e</code></td>
<td>escape character</td>
</tr>
<tr>
<td><code>\E</code></td>
<td>escape character</td>
</tr>
<tr>
<td><code>\f</code></td>
<td>form feed</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>new line</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>carriage return</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>horizontal tab</td>
</tr>
<tr>
<td><code>\v</code></td>
<td>vertical tab</td>
</tr>
<tr>
<td><code>\\</code></td>
<td>backslash</td>
</tr>
<tr>
<td><code>\0nnn</code></td>
<td>the character whose ASCII code is NNN (octal).  NNN can be 0 to 3 octal digits.</td>
</tr>
<tr>
<td><code>\xHH</code></td>
<td>the eight-bit character whose value is HH (hexadecimal).  HH can be one or two hex digits.</td>
</tr>
<tr>
<td><code>\uHHHH</code></td>
<td>the Unicode character whose value is the hexadecimal value HHHH. HHHH can be one to four hex digits.</td>
</tr>
<tr>
<td><code>\UHHHHHHHH</code></td>
<td>the Unicode character whose value is the hexadecimal value HHHHHHHH. HHHHHHHH can be one to eight hex digits.</td>
</tr>
</tbody></table>
<h3 id="显示结果定向至文件"><a href="#显示结果定向至文件" class="headerlink" title="显示结果定向至文件"></a>显示结果定向至文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;It is a test&quot; &gt; myfile</span><br></pre></td></tr></table></figure>

<h3 id="显示命令执行结果"><a href="#显示命令执行结果" class="headerlink" title="显示命令执行结果"></a>显示命令执行结果</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo `date`</span><br></pre></td></tr></table></figure>

<p>输出结果（当前时间）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mon 25 Jan 2021 05:22:36 PM CST</span><br></pre></td></tr></table></figure>

<h2 id="printf-命令"><a href="#printf-命令" class="headerlink" title="printf 命令"></a>printf 命令</h2><p>printf 命令模仿 C 程序库（library）里的 printf() 程序。</p>
<p>printf 由 POSIX 标准所定义，因此使用 printf 的脚本比使用 echo 移植性好。</p>
<p>printf 使用引用文本或空格分隔的参数，外面可以在 printf 中使用格式化字符串，还可以制定字符串的宽度、左右对齐方式等。默认 printf 不会像 echo 自动添加换行符，我们可以手动添加 <code>\n</code>。</p>
<p>printf 命令的语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printf  format-string  [arguments...]</span><br></pre></td></tr></table></figure>

<p><strong>参数说明：</strong></p>
<ul>
<li><strong>format-string:</strong> 为格式控制字符串</li>
<li><strong>arguments:</strong> 为参数列表</li>
</ul>
<p>例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">printf &quot;%-10s %-8s %-4s\n&quot; 姓名 性别 体重kg  </span><br><span class="line">printf &quot;%-10s %-8s %-4.2f\n&quot; 郭靖 男 66.1234</span><br><span class="line">printf &quot;%-10s %-8s %-4.2f\n&quot; 杨过 男 48.6543</span><br><span class="line">printf &quot;%-10s %-8s %-4.2f\n&quot; 郭芙 女 47.9876</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> format-string为双引号</span></span><br><span class="line">printf &quot;%d %s\n&quot; 1 &quot;abc&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 单引号与双引号效果一样</span></span><br><span class="line">printf &#x27;%d %s\n&#x27; 1 &quot;abc&quot;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 没有引号也可以输出</span></span><br><span class="line">printf %s abcdef</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 格式只指定了一个参数，但多出的参数仍然会按照该格式输出，format-string 被重用</span></span><br><span class="line">printf %s abc def</span><br><span class="line"></span><br><span class="line">printf &quot;%s\n&quot; abc def</span><br><span class="line"></span><br><span class="line">printf &quot;%s %s %s\n&quot; a b c d e f g h i j</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果没有 arguments，那么 %s 用NULL代替，%d 用 0 代替</span></span><br><span class="line">printf &quot;%s and %d \n&quot;</span><br></pre></td></tr></table></figure>

<h2 id="test-命令"><a href="#test-命令" class="headerlink" title="test 命令"></a>test 命令</h2><h3 id="数值测试"><a href="#数值测试" class="headerlink" title="数值测试"></a>数值测试</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">num1=100</span><br><span class="line">num2=100</span><br><span class="line">if test $num1 -eq $num2</span><br><span class="line">then</span><br><span class="line">  echo &#x27;两个数相等！&#x27;</span><br><span class="line">else</span><br><span class="line">  echo &#x27;两个数不相等！&#x27;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h3 id="字符串测试"><a href="#字符串测试" class="headerlink" title="字符串测试"></a>字符串测试</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">num1=&quot;ru1noob&quot;</span><br><span class="line">num2=&quot;runoob&quot;</span><br><span class="line">if test $num1 = $num2</span><br><span class="line">then</span><br><span class="line">  echo &#x27;两个字符串相等!&#x27;</span><br><span class="line">else</span><br><span class="line">  echo &#x27;两个字符串不相等!&#x27;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h3 id="文件测试"><a href="#文件测试" class="headerlink" title="文件测试"></a>文件测试</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /bin</span><br><span class="line">if test -e ./bash</span><br><span class="line">then</span><br><span class="line">  echo &#x27;文件已存在!&#x27;</span><br><span class="line">else</span><br><span class="line">  echo &#x27;文件不存在!&#x27;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>



<h1 id="Shell-变量"><a href="#Shell-变量" class="headerlink" title="Shell 变量"></a>Shell 变量</h1><h2 id="变量命名规则"><a href="#变量命名规则" class="headerlink" title="变量命名规则"></a>变量命名规则</h2><ul>
<li>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</li>
<li>中间不能有空格，可以使用下划线（_）。</li>
<li>不能使用标点符号。</li>
<li>不能使用bash里的关键字（可用help命令查看保留关键字）。</li>
</ul>
<h2 id="变量定义"><a href="#变量定义" class="headerlink" title="变量定义"></a>变量定义</h2><h3 id="显式定义"><a href="#显式定义" class="headerlink" title="显式定义"></a>显式定义</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">your_name=&quot;runoob.com&quot;</span><br></pre></td></tr></table></figure>

<p><strong>注意：等号左右都不能有空格！</strong></p>
<h3 id="隐式定义"><a href="#隐式定义" class="headerlink" title="隐式定义"></a>隐式定义</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for file in `ls /etc`</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for file in $(ls /etc)</span><br></pre></td></tr></table></figure>

<p>以上语句将 /etc 下目录的文件名循环出来。</p>
<h2 id="变量使用"><a href="#变量使用" class="headerlink" title="变量使用"></a>变量使用</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">your_name=&quot;wbx&quot;</span><br><span class="line">echo $your_name</span><br><span class="line">echo $&#123;your_name&#125;</span><br></pre></td></tr></table></figure>

<p>变量可以重新定义</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">your_name=&quot;tom&quot;</span><br><span class="line">echo $your_name</span><br><span class="line">your_name=&quot;alibaba&quot;</span><br><span class="line">echo $your_name</span><br></pre></td></tr></table></figure>

<h2 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h2><ul>
<li><p>按作用域可分为</p>
<ul>
<li><p><strong>局部变量</strong></p>
<p>局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。</p>
</li>
<li><p><strong>环境变量</strong> </p>
<p>所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。</p>
</li>
<li><p><strong>shell变量</strong> </p>
<p>shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行</p>
</li>
</ul>
</li>
<li><p>按能否重新定义，可分为</p>
<ul>
<li><p><strong>可变变量</strong></p>
<p>一般定义的为可变变量</p>
</li>
<li><p><strong>只读变量</strong></p>
<p>用readonly命令可将变量定义为只读变量。如下shell脚本执行会报错。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">myUrl=&quot;https://www.google.com&quot;</span><br><span class="line">readonly myUrl</span><br><span class="line">myUrl=&quot;https://www.baidu.com&quot;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="变量删除"><a href="#变量删除" class="headerlink" title="变量删除"></a>变量删除</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unset variable_name</span><br></pre></td></tr></table></figure>

<p><strong>注意：unset 命令不能删除只读变量。</strong></p>
<h1 id="Shell-数据类型"><a href="#Shell-数据类型" class="headerlink" title="Shell 数据类型"></a>Shell 数据类型</h1><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><p>字符串定义可以用单引号，也可以用双引号，也可以不用引号。</p>
<h3 id="字符串变量定义"><a href="#字符串变量定义" class="headerlink" title="字符串变量定义"></a>字符串变量定义</h3><h4 id="单引号法"><a href="#单引号法" class="headerlink" title="单引号法"></a>单引号法</h4><p>最简单的例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str=&#x27;this is a string&#x27;</span><br></pre></td></tr></table></figure>

<p>下面在例子中观察单引号的用法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">str=&#x27;string&#x27;</span><br><span class="line">str1=&#x27;This is a $str.&#x27;</span><br><span class="line">str2=&#x27;This is a &#x27;$str&#x27;.&#x27;</span><br><span class="line"><span class="meta">#</span><span class="bash"> str3=<span class="string">&#x27;This is a \&#x27;</span><span class="variable">$str</span>\<span class="string">&#x27;.&#x27;</span>	<span class="comment"># 这句会报错</span></span></span><br><span class="line">str4=&#x27;This is a &quot;$str&quot;.&#x27;</span><br><span class="line">str5=&#x27;This is a \&quot;$str\&quot;.&#x27;</span><br><span class="line">echo &quot;1: $str1&quot;</span><br><span class="line">echo &quot;2: $str2&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;3: <span class="variable">$str3</span>&quot;</span></span></span><br><span class="line">echo &quot;4: $str4&quot;</span><br><span class="line">echo &quot;5: $str5&quot;</span><br></pre></td></tr></table></figure>

<p>  输出</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1: This is a $str.</span><br><span class="line">2: This is a string.</span><br><span class="line">4: This is a &quot;$str&quot;.</span><br><span class="line">5: This is a \&quot;$str\&quot;.</span><br></pre></td></tr></table></figure>

<p>  下面会报错</p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">str=&#x27;string&#x27;</span><br><span class="line">str3=&#x27;This is a \&#x27;$str\&#x27;&#x27;</span><br><span class="line">echo $str3</span><br></pre></td></tr></table></figure>

<p>单引号的一些特点：</p>
<ul>
<li>单引号中要输出变量的话，不能直接放变量（$name），要用单引号括起来，否则会被当成字符输出</li>
<li>单引号中不能出现单独一个的单引号（对单引号使用转义符后也不行），<strong>但可成对出现</strong>，作为字符串拼接使用。<strong>即单引号中不能输出单引号！</strong></li>
<li>单引号中的双引号就是一个普通的字符，不需要转义直接输出</li>
</ul>
<h4 id="双引号法"><a href="#双引号法" class="headerlink" title="双引号法"></a>双引号法</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line">str=&#x27;string&#x27;</span><br><span class="line">str1=&quot;This is a $str.&quot;</span><br><span class="line">str2=&quot;This is a &quot;$str&quot;.&quot;</span><br><span class="line">str3=&quot;This is a \&quot;$str\&quot;.&quot;</span><br><span class="line">str4=&quot;This is a &#x27;$str&#x27;.&quot;</span><br><span class="line">str5=&quot;This is a \&#x27;$str\&#x27;.&quot;</span><br><span class="line">echo &quot;1: $str1&quot;</span><br><span class="line">echo &quot;2: $str2&quot;</span><br><span class="line">echo &quot;3: $str3&quot;</span><br><span class="line">echo &quot;4: $str4&quot;</span><br><span class="line">echo &quot;5: $str5&quot;</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1: This is a string.</span><br><span class="line">2: This is a string.</span><br><span class="line">3: This is a &quot;string&quot;.</span><br><span class="line">4: This is a &#39;string&#39;.</span><br><span class="line">5: This is a \&#39;string\&#39;&#39;.</span><br></pre></td></tr></table></figure>

<ul>
<li>双引号的一些特点<ul>
<li>双引号里面可以放变量，变量可加双引号，也可不加双引号，效果都一样</li>
<li>双引号中输出双引号需要用转义符</li>
<li>双引号中的单引号只是个普通的字符，不需要转义直接输出</li>
</ul>
</li>
</ul>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ol>
<li>字符串定义时，不管是单引号还是双引号，在有变量时，可一律加引号（单引号里面就加单引号，双引号里面就加双引号）</li>
<li>单引号里面不能输出单独的一个单引号，双引号里面输出双引号时要用转义符</li>
<li>单引号里面的双引号以及双引号里面的单引号都视为普通字符</li>
<li>平时用双引号即可，功能比单引号多</li>
</ol>
<h3 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h3><p>见<a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89">字符串变量定义</a>一节。</p>
<h3 id="字符串长度获取"><a href="#字符串长度获取" class="headerlink" title="字符串长度获取"></a>字符串长度获取</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string=&quot;abcd&quot;</span><br><span class="line">echo $&#123;#string&#125; # 输出为4</span><br></pre></td></tr></table></figure>

<h3 id="子字符串获取"><a href="#子字符串获取" class="headerlink" title="子字符串获取"></a>子字符串获取</h3><p>创建文件test.sh：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">! /bin/bash</span></span><br><span class="line">string=&quot;abcdefg&quot;</span><br><span class="line">echo $&#123;string:1:4&#125; # 输出bcde</span><br></pre></td></tr></table></figure>

<p><strong>注意：解释器的选择要正确，否则会出现Bad substitution的错误。</strong></p>
<p>这里用发现<code>bash test.sh</code>或<code>/bin/bash test.sh</code>能成功运行，<code>sh test.sh</code>或<code>/bin/sh test.sh</code>都会报错。另外，<code>bash --posix test.sh</code> 或<code>/bin/bash --posix test.sh</code>却能成功运行。</p>
<p>因此我推测：直接用命令和指定解释器路径来执行脚本是等价的，但<code>sh</code>与<code>bash --posix</code>不等价。</p>
<h3 id="查找字符串"><a href="#查找字符串" class="headerlink" title="查找字符串"></a>查找字符串</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string=&quot;runoob is a great site&quot;</span><br><span class="line">echo `expr index &quot;$string&quot; io`  # 输出 4</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 以上脚本中 <strong>`</strong> 是反引号，而不是单引号 **’**，不要看错了哦。</p>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小。</p>
<p>类似于 C 语言，数组元素的下标由 0 开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于 0。</p>
<h3 id="数组变量定义"><a href="#数组变量定义" class="headerlink" title="数组变量定义"></a>数组变量定义</h3><p>在 Shell 中，用括号来表示数组，数组元素用”空格”符号分割开。例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array_name=(value0 value1 value2 value3)</span><br></pre></td></tr></table></figure>

<p>或单独定义数组的各个分量：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array_name[0]=value0</span><br><span class="line">array_name[1]=value1</span><br><span class="line">array_name[n]=valuen</span><br></pre></td></tr></table></figure>

<p><strong>可以不使用连续的下标</strong>，而且下标的范围没有限制。</p>
<h3 id="数组读取"><a href="#数组读取" class="headerlink" title="数组读取"></a>数组读取</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">valuen=$&#123;array_name[n]&#125;</span><br></pre></td></tr></table></figure>

<p>使用 @ 符号可以获取数组中的所有元素，例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $&#123;array_name[@]&#125;</span><br></pre></td></tr></table></figure>

<h3 id="数组长度获取"><a href="#数组长度获取" class="headerlink" title="数组长度获取"></a>数组长度获取</h3><p>获取数组长度的方法与获取字符串长度的方法相同，例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 取得数组元素的个数</span></span><br><span class="line">length=$&#123;#array_name[@]&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者</span></span><br><span class="line">length=$&#123;#array_name[*]&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 取得数组单个元素的长度</span></span><br><span class="line">lengthn=$&#123;#array_name[n]&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Shell-参数传递"><a href="#Shell-参数传递" class="headerlink" title="Shell 参数传递"></a>Shell 参数传递</h1><p>我们可以在执行 Shell 脚本时，向脚本传递参数，脚本内获取参数的格式为：<code>$n</code>。</p>
<p>n 代表一个数字，1 为执行脚本的第一个参数，2 为执行脚本的第二个参数，以此类推……0默认为执行的脚本文件名（包含文件路径）。</p>
<p>例：新建文件test.sh：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo &quot;执行的文件名：$0&quot;</span><br><span class="line">echo &quot;第一个参数为：$1&quot;</span><br><span class="line">echo &quot;第二个参数为：$2&quot;</span><br><span class="line">echo &quot;第三个参数为：$3&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh test.sh abc 123 5f5</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">执行的文件名：test.sh</span><br><span class="line">第一个参数为：abc</span><br><span class="line">第二个参数为：123</span><br><span class="line">第三个参数为：5f5</span><br></pre></td></tr></table></figure>

<p>另外，还有几个特殊字符用来处理参数：</p>
<table>
<thead>
<tr>
<th align="left">参数处理</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$#</code></td>
<td align="left">传递到脚本的参数个数</td>
</tr>
<tr>
<td align="left"><code>$$</code></td>
<td align="left">脚本运行的当前进程ID号</td>
</tr>
<tr>
<td align="left"><code>$!</code></td>
<td align="left">后台运行的最后一个进程的ID号</td>
</tr>
<tr>
<td align="left"><code>$*</code></td>
<td align="left">以一个单字符串的形式显示所有向脚本传递的参数。 <br />如果是<code>$*</code>用<code>&quot;</code>括起来的情况，则会以<code>$1 $2 … $n</code>的形式输出所有参数。</td>
</tr>
<tr>
<td align="left"><code>$@</code></td>
<td align="left">以一个字符串组的形式显示所有向脚本传递的参数。不加引号则与<code>$*</code>相同。 <br />如果是<code>$@</code>用<code>&quot;</code>括起来的情况、则会以<code>$1</code> <code>$2</code> <code>…</code> <code>$n</code>的形式输出所有参数。用for循环可以看出二者的区别。</td>
</tr>
<tr>
<td align="left"><code>$-</code></td>
<td align="left">显示Shell使用的当前选项，与<a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-comm-set.html">set命令</a>功能相同。</td>
</tr>
<tr>
<td align="left"><code>$?</code></td>
<td align="left">显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td>
</tr>
</tbody></table>
<p>演示<code>$*</code>与<code>$@</code>的区别：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo &quot;-- \$* 演示 ---&quot;</span><br><span class="line">for i in &quot;$*&quot;; do</span><br><span class="line">    echo $i</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line">echo &quot;-- \$@ 演示 ---&quot;</span><br><span class="line">for i in &quot;$@&quot;; do</span><br><span class="line">    echo $i</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh test.sh 1 2 3</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- $* 演示 ---</span><br><span class="line">1 2 3</span><br><span class="line">-- $@ 演示 ---</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<h1 id="Shell-运算符"><a href="#Shell-运算符" class="headerlink" title="Shell 运算符"></a>Shell 运算符</h1><h2 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h2><p>例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">val=`expr 2 + 2`</span><br><span class="line">echo &quot;两数之和为：$val&quot;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ul>
<li>表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2，这与我们熟悉的大多数编程语言不一样。</li>
<li>完整的表达式要被 <strong><code> </code></strong> 包含，注意这个字符不是常用的单引号，在 Esc 键下边。</li>
</ul>
<table>
<thead>
<tr>
<th>算数运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td><code>+</code></td>
<td>加法</td>
<td><code>expr $a + $b</code></td>
</tr>
<tr>
<td><code>-</code></td>
<td>减法</td>
<td><code>expr $a - $b</code></td>
</tr>
<tr>
<td><code>\*</code></td>
<td>乘法</td>
<td><code>expr $a \* $b</code></td>
</tr>
<tr>
<td><code>/</code></td>
<td>除法</td>
<td><code>expr $b / $a</code></td>
</tr>
<tr>
<td><code>%</code></td>
<td>取余</td>
<td><code>expr $b % $a</code></td>
</tr>
<tr>
<td><code>=</code></td>
<td>赋值</td>
<td><code>a=$b</code> 将把变量 b 的值赋给 a。</td>
</tr>
<tr>
<td><code>==</code></td>
<td>相等。用于比较两个数字，相同则返回 true。</td>
<td><code>[ $a == $b ]</code></td>
</tr>
<tr>
<td><code>!=</code></td>
<td>不相等。用于比较两个数字，不相同则返回 true。</td>
<td><code>[ $a != $b ]</code></td>
</tr>
</tbody></table>
<p><strong>注意：</strong></p>
<ul>
<li>条件表达式要放在方括号之间，并且要有空格，例如: <code>[$a==$b]</code> 是错误的，必须写成 <code>[ $a == $b ]</code>。</li>
<li>乘号<code>*</code>前边必须加反斜杠<code>\</code>才能实现乘法运算。</li>
</ul>
<h2 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h2><table>
<thead>
<tr>
<th align="left">运算符</th>
<th>助记</th>
<th align="left">说明</th>
<th align="left">举例</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-eq</code></td>
<td>equal</td>
<td align="left">检测两个数是否相等，相等返回 true。</td>
<td align="left"><code>[ $a -eq $b ]</code></td>
</tr>
<tr>
<td align="left"><code>-ne</code></td>
<td>unequal</td>
<td align="left">检测两个数是否不相等，不相等返回 true。</td>
<td align="left"><code>[ $a -ne $b ]</code></td>
</tr>
<tr>
<td align="left"><code>-gt</code></td>
<td>greater</td>
<td align="left">检测左边的数是否大于右边的，如果是，则返回 true。</td>
<td align="left"><code>[ $a -gt $b ]</code></td>
</tr>
<tr>
<td align="left"><code>-lt</code></td>
<td>less</td>
<td align="left">检测左边的数是否小于右边的，如果是，则返回 true。</td>
<td align="left"><code>[ $a -lt $b ]</code></td>
</tr>
<tr>
<td align="left"><code>-ge</code></td>
<td>greater equal</td>
<td align="left">检测左边的数是否大于等于右边的，如果是，则返回 true。</td>
<td align="left"><code>[ $a -ge $b ]</code></td>
</tr>
<tr>
<td align="left"><code>-le</code></td>
<td>less equal</td>
<td align="left">检测左边的数是否小于等于右边的，如果是，则返回 true。</td>
<td align="left"><code>[ $a -le $b ]</code></td>
</tr>
</tbody></table>
<h2 id="布尔运算符"><a href="#布尔运算符" class="headerlink" title="布尔运算符"></a>布尔运算符</h2><table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">说明</th>
<th align="left">举例</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>!</code></td>
<td align="left">非运算，表达式为 true 则返回 false，否则返回 true。</td>
<td align="left"><code>[ ! false ]</code></td>
</tr>
<tr>
<td align="left"><code>-o</code></td>
<td align="left">或运算，有一个表达式为 true 则返回 true。</td>
<td align="left"><code>[ $a -lt 20 -o $b -gt 100 ]</code></td>
</tr>
<tr>
<td align="left"><code>-a</code></td>
<td align="left">与运算，两个表达式都为 true 才返回 true。</td>
<td align="left"><code>[ $a -lt 20 -a $b -gt 100 ]</code></td>
</tr>
</tbody></table>
<h2 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h2><table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">说明</th>
<th align="left">举例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&amp;&amp;</td>
<td align="left">逻辑的 AND</td>
<td align="left"><code>[[ $a -lt 100 &amp;&amp; $b -gt 100 ]]</code> 返回 false</td>
</tr>
<tr>
<td align="left">||</td>
<td align="left">逻辑的 OR</td>
<td align="left">`[[ $a -lt 100</td>
</tr>
</tbody></table>
<h2 id="字符串运算符"><a href="#字符串运算符" class="headerlink" title="字符串运算符"></a>字符串运算符</h2><table>
<thead>
<tr>
<th align="left">运算符</th>
<th align="left">说明</th>
<th align="left">举例</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>=</code></td>
<td align="left">检测两个字符串是否相等，相等返回 true。</td>
<td align="left"><code>[ $a = $b ]</code></td>
</tr>
<tr>
<td align="left"><code>!=</code></td>
<td align="left">检测两个字符串是否相等，不相等返回 true。</td>
<td align="left"><code>[ $a != $b ]</code></td>
</tr>
<tr>
<td align="left"><code>-z</code></td>
<td align="left">检测字符串长度是否为0，为0返回 true。</td>
<td align="left"><code>[ -z $a ]</code></td>
</tr>
<tr>
<td align="left"><code>-n</code></td>
<td align="left">检测字符串长度是否不为 0，不为 0 返回 true。</td>
<td align="left"><code>[ -n &quot;$a&quot; ]</code></td>
</tr>
<tr>
<td align="left"><code>$</code></td>
<td align="left">检测字符串是否为空，不为空返回 true。</td>
<td align="left"><code>[ $a ]</code></td>
</tr>
</tbody></table>
<h2 id="文件测试运算符"><a href="#文件测试运算符" class="headerlink" title="文件测试运算符"></a>文件测试运算符</h2><table>
<thead>
<tr>
<th align="left">操作符</th>
<th>助记</th>
<th align="left">说明</th>
<th align="left">举例</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>-b</code></td>
<td>block</td>
<td align="left">检测文件是否是块设备文件，如果是，则返回 true。</td>
<td align="left"><code>[ -b $file ] </code></td>
</tr>
<tr>
<td align="left"><code>-c</code></td>
<td>char</td>
<td align="left">检测文件是否是字符设备文件，如果是，则返回 true。</td>
<td align="left"><code>[ -c $file ]</code></td>
</tr>
<tr>
<td align="left"><code>-d</code></td>
<td>directory</td>
<td align="left">检测文件是否是目录，如果是，则返回 true。</td>
<td align="left"><code>[ -d $file ] </code></td>
</tr>
<tr>
<td align="left"><code>-f</code></td>
<td>file</td>
<td align="left">检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td>
<td align="left"><code>[ -f $file ] </code></td>
</tr>
<tr>
<td align="left"><code>-g</code></td>
<td>S<strong>G</strong>ID</td>
<td align="left">检测文件是否设置了 SGID 位，如果是，则返回 true。</td>
<td align="left"><code>[ -g $file ] </code></td>
</tr>
<tr>
<td align="left"><code>-k</code></td>
<td>Stic<strong>k</strong>y</td>
<td align="left">检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td>
<td align="left"><code>[ -k $file ] </code></td>
</tr>
<tr>
<td align="left"><code>-p</code></td>
<td>pipe</td>
<td align="left">检测文件是否是有名管道，如果是，则返回 true。</td>
<td align="left"><code>[ -p $file ] </code></td>
</tr>
<tr>
<td align="left"><code>-u</code></td>
<td>S<strong>U</strong>ID</td>
<td align="left">检测文件是否设置了 SUID 位，如果是，则返回 true。</td>
<td align="left"><code>[ -u $file ] </code></td>
</tr>
<tr>
<td align="left"><code>-r</code></td>
<td>read</td>
<td align="left">检测文件是否可读，如果是，则返回 true。</td>
<td align="left"><code>[ -r $file ] </code></td>
</tr>
<tr>
<td align="left"><code>-w</code></td>
<td>write</td>
<td align="left">检测文件是否可写，如果是，则返回 true。</td>
<td align="left"><code>[ -w $file ] </code></td>
</tr>
<tr>
<td align="left"><code>-x</code></td>
<td>execute</td>
<td align="left">检测文件是否可执行，如果是，则返回 true。</td>
<td align="left"><code>[ -x $file ] </code></td>
</tr>
<tr>
<td align="left"><code>-s</code></td>
<td>(sky)</td>
<td align="left">检测文件是否为空（文件大小是否大于0），不为空返回 true。</td>
<td align="left"><code>[ -s $file ] </code></td>
</tr>
<tr>
<td align="left"><code>-e</code></td>
<td>exist</td>
<td align="left">检测文件（包括目录）是否存在，如果是，则返回 true。</td>
<td align="left"><code>[ -e $file ] </code></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>操作符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody><tr>
<td><code>-S</code></td>
<td>判断某文件是否 socket。</td>
<td><code>[ -S $file ]</code></td>
</tr>
<tr>
<td><code>-L</code></td>
<td>检测文件是否存在并且是一个符号链接。</td>
<td><code>[ -L $file]</code></td>
</tr>
</tbody></table>
<h1 id="Shell-流程控制"><a href="#Shell-流程控制" class="headerlink" title="Shell 流程控制"></a>Shell 流程控制</h1><h2 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h2><h3 id="if-条件判断"><a href="#if-条件判断" class="headerlink" title="if 条件判断"></a>if 条件判断</h3><p>格式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">if condition1</span><br><span class="line">then</span><br><span class="line">	command1 </span><br><span class="line">elif condition2</span><br><span class="line">then</span><br><span class="line">	command2</span><br><span class="line">else</span><br><span class="line">	command3	# 注意若写了else，则这里不能为空</span><br><span class="line">fi	# fi就是if反过来写，也可以理解为finish</span><br></pre></td></tr></table></figure>

<p>或写成一行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if condition; then command; fi</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">a=10</span><br><span class="line">b=20</span><br><span class="line"></span><br><span class="line">if [ $a == $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;a 等于 b&quot;</span><br><span class="line">elif [ $a -gt $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;a 大于 b&quot;</span><br><span class="line">elif [ $a -lt $b ]</span><br><span class="line">then</span><br><span class="line">   echo &quot;a 小于 b&quot;</span><br><span class="line">else</span><br><span class="line">   echo &quot;没有符合的条件&quot;</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p><strong>注意：这里用bash，用sh会报错。</strong></p>
<h3 id="case-条件判断"><a href="#case-条件判断" class="headerlink" title="case 条件判断"></a>case 条件判断</h3><p>语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">case 值 in</span><br><span class="line">模式1)</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">    ;;</span><br><span class="line">模式2）</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">    ;;</span><br><span class="line">esac	# 就是case反过来写</span><br></pre></td></tr></table></figure>

<p>例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;输入 1 到 4 之间的数字:&#x27;</span><br><span class="line">echo &#x27;你输入的数字为:&#x27;</span><br><span class="line">read aNum</span><br><span class="line">case $aNum in</span><br><span class="line">    1)  echo &#x27;你选择了 1&#x27;</span><br><span class="line">    ;;</span><br><span class="line">    2)  echo &#x27;你选择了 2&#x27;</span><br><span class="line">    ;;</span><br><span class="line">    3)  echo &#x27;你选择了 3&#x27;</span><br><span class="line">    ;;</span><br><span class="line">    4)  echo &#x27;你选择了 4&#x27;</span><br><span class="line">    ;;</span><br><span class="line">    *)  echo &#x27;你没有输入 1 到 4 之间的数字&#x27;</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><h3 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for var in item1 item2 ... itemN</span><br><span class="line">do</span><br><span class="line">    command1</span><br><span class="line">    command2</span><br><span class="line">    ...</span><br><span class="line">    commandN</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>或写成一行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for var in item1 item2 ... itemN; do command1; command...; done;</span><br></pre></td></tr></table></figure>

<p>例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for loop in 1 2 3 4 5</span><br><span class="line">do</span><br><span class="line">    echo &quot;The value is: $loop&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for str in &#x27;This is a string&#x27;</span><br><span class="line">do</span><br><span class="line">    echo $str</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h3><p>格式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while condition</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">int=1</span><br><span class="line">while(( $int&lt;=5 ))</span><br><span class="line">do</span><br><span class="line">    echo $int</span><br><span class="line">    let &quot;int++&quot;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="无限循环"><a href="#无限循环" class="headerlink" title="无限循环"></a>无限循环</h3><p>有三种写法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while :</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">while true</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for (( ; ; ))</span><br></pre></td></tr></table></figure>

<h3 id="until-循环"><a href="#until-循环" class="headerlink" title="until 循环"></a>until 循环</h3><p>语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until condition</span><br><span class="line">do</span><br><span class="line">    command</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">a=0</span><br><span class="line"></span><br><span class="line">until [ ! $a -lt 10 ]</span><br><span class="line">do</span><br><span class="line">   echo $a</span><br><span class="line">   a=`expr $a + 1`</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="break-命令"><a href="#break-命令" class="headerlink" title="break 命令"></a>break 命令</h3><p>例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">while :</span><br><span class="line">do</span><br><span class="line">    echo -n &quot;输入 1 到 5 之间的数字:&quot;</span><br><span class="line">    read aNum</span><br><span class="line">    case $aNum in</span><br><span class="line">        1|2|3|4|5) echo &quot;你输入的数字为 $aNum!&quot;</span><br><span class="line">        ;;</span><br><span class="line">        *) echo &quot;你输入的数字不是 1 到 5 之间的! 游戏结束&quot;</span><br><span class="line">            break</span><br><span class="line">        ;;</span><br><span class="line">    esac</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h3 id="continue-命令"><a href="#continue-命令" class="headerlink" title="continue 命令"></a>continue 命令</h3><p>例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">while :</span><br><span class="line">do</span><br><span class="line">    echo -n &quot;输入 1 到 5 之间的数字: &quot;</span><br><span class="line">    read aNum</span><br><span class="line">    case $aNum in</span><br><span class="line">        1|2|3|4|5) echo &quot;你输入的数字为 $aNum!&quot;</span><br><span class="line">        ;;</span><br><span class="line">        *) echo &quot;你输入的数字不是 1 到 5 之间的!&quot;</span><br><span class="line">            continue</span><br><span class="line">            echo &quot;游戏结束&quot;	# 该语句永远不会被执行</span><br><span class="line">        ;;</span><br><span class="line">    esac</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">site=&quot;runoob&quot;</span><br><span class="line"></span><br><span class="line">case &quot;$site&quot; in</span><br><span class="line">   &quot;runoob&quot;) echo &quot;菜鸟教程&quot;</span><br><span class="line">   ;;</span><br><span class="line">   &quot;google&quot;) echo &quot;Google 搜索&quot;</span><br><span class="line">   ;;</span><br><span class="line">   &quot;taobao&quot;) echo &quot;淘宝网&quot;</span><br><span class="line">   ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<h1 id="Shell-函数"><a href="#Shell-函数" class="headerlink" title="Shell 函数"></a>Shell 函数</h1><p>语法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[ function ] funname [()]	# []表示可写可不写，但这里不能二者都不写</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    action;</span><br><span class="line"></span><br><span class="line">    [ return int ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ul>
<li>可以带function fun() 定义，也可以直接fun() 定义,不带任何参数。</li>
<li>return语句如果不加，将以最后一条命令的运行结果，作为返回值。 return后跟数值n（0~255）。</li>
</ul>
<p>例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">demoFun()&#123;</span><br><span class="line">    echo &quot;这是我的第一个 shell 函数!&quot;</span><br><span class="line">&#125;</span><br><span class="line">echo &quot;-----函数开始执行-----&quot;</span><br><span class="line">demoFun</span><br><span class="line">echo &quot;-----函数执行完毕-----&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">funWithReturn()&#123;</span><br><span class="line">    echo &quot;这个函数会对输入的两个数字进行相加运算...&quot;</span><br><span class="line">    echo &quot;输入第一个数字: &quot;</span><br><span class="line">    read aNum</span><br><span class="line">    echo &quot;输入第二个数字: &quot;</span><br><span class="line">    read anotherNum</span><br><span class="line">    echo &quot;两个数字分别为 $aNum 和 $anotherNum !&quot;</span><br><span class="line">    return $(($aNum+$anotherNum))</span><br><span class="line">&#125;</span><br><span class="line">funWithReturn</span><br><span class="line">echo &quot;输入的两个数字之和为 $? !&quot;</span><br></pre></td></tr></table></figure>

<p>带参数的函数示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> author:菜鸟教程</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> url:www.runoob.com</span></span><br><span class="line"></span><br><span class="line">funWithParam()&#123;</span><br><span class="line">    echo &quot;第一个参数为 $1 !&quot;</span><br><span class="line">    echo &quot;第二个参数为 $2 !&quot;</span><br><span class="line">    echo &quot;第十个参数为 $10 !&quot;</span><br><span class="line">    echo &quot;第十个参数为 $&#123;10&#125; !&quot;</span><br><span class="line">    echo &quot;第十一个参数为 $&#123;11&#125; !&quot;</span><br><span class="line">    echo &quot;参数总数有 $# 个!&quot;</span><br><span class="line">    echo &quot;作为一个字符串输出所有参数 $* !&quot;</span><br><span class="line">&#125;</span><br><span class="line">funWithParam 1 2 3 4 5 6 7 8 9 34 73</span><br></pre></td></tr></table></figure>

<p><strong>注意：<code>$10</code> 不能获取第十个参数，获取第十个参数需要<code>$&#123;10&#125;</code>。当n&gt;=10时，需要使用<code>$&#123;n&#125;</code>来获取参数。</strong></p>
<h1 id="Shell-输入-输出重定向"><a href="#Shell-输入-输出重定向" class="headerlink" title="Shell 输入/输出重定向"></a>Shell 输入/输出重定向</h1><p>大多数 UNIX 系统命令从你的终端接受输入并将所产生的输出发送回到您的终端。一个命令通常从一个叫标准输入的地方读取输入，默认情况下，这恰好是你的终端。同样，一个命令通常将其输出写入到标准输出，默认情况下，这也是你的终端。</p>
<p>一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件：</p>
<ul>
<li>标准输入文件(stdin)：<strong>stdin的文件描述符为0</strong>，Unix程序默认从stdin读取数据。</li>
<li>标准输出文件(stdout)：<strong>stdout 的文件描述符为1</strong>，Unix程序默认向stdout输出数据。</li>
<li>标准错误文件(stderr)：<strong>stderr的文件描述符为2</strong>，Unix程序会向stderr流中写入错误信息。</li>
</ul>
<p>默认情况下，command &gt; file 将 stdout 重定向到 file，command &lt; file 将stdin 重定向到 file。</p>
<p>如果希望 stderr 重定向到 file，可以这样写：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">command</span> 2&gt;file</span></span><br></pre></td></tr></table></figure>

<p>如果希望 stderr 追加到 file 文件末尾，可以这样写：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">command</span> 2&gt;&gt;file</span></span><br></pre></td></tr></table></figure>

<p>重定向命令列表如下：</p>
<table>
<thead>
<tr>
<th align="left">命令</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>command &gt; file</code></td>
<td align="left">将输出重定向到 file。</td>
</tr>
<tr>
<td align="left"><code>command &lt; file</code></td>
<td align="left">将输入重定向到 file。</td>
</tr>
<tr>
<td align="left"><code>command &gt;&gt; file</code></td>
<td align="left">将输出以追加的方式重定向到 file。</td>
</tr>
<tr>
<td align="left"><code>n &gt; file</code></td>
<td align="left">将文件描述符为 n 的文件重定向到 file。</td>
</tr>
<tr>
<td align="left"><code>n &gt;&gt; file</code></td>
<td align="left">将文件描述符为 n 的文件以追加的方式重定向到 file。</td>
</tr>
<tr>
<td align="left"><code>n &gt;&amp; m</code></td>
<td align="left">将输出文件 m 和 n 合并。</td>
</tr>
<tr>
<td align="left"><code>n &lt;&amp; m</code></td>
<td align="left">将输入文件 m 和 n 合并。</td>
</tr>
<tr>
<td align="left"><code>&lt;&lt; tag</code></td>
<td align="left">将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td>
</tr>
</tbody></table>
<p>例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 统计 file 文件的行数</span></span><br><span class="line">wc -l file		# 输出 2 file</span><br><span class="line">wc -l &lt; file	# 输出 2</span><br></pre></td></tr></table></figure>

<p>下面这个例子，执行command1，从文件infile读取内容，然后将输出写入到outfile中：（<strong>说明执行顺序是从左到右的</strong>）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1 &lt; infile &gt; outfile</span><br></pre></td></tr></table></figure>

<h2 id="Here-Document"><a href="#Here-Document" class="headerlink" title="Here Document"></a>Here Document</h2><p>Here Document 是 Shell 中的一种特殊的重定向方式，用来将输入重定向到一个交互式 Shell 脚本或程序。</p>
<p>它的基本的形式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">command &lt;&lt; delimiter</span><br><span class="line">    document</span><br><span class="line">delimiter</span><br></pre></td></tr></table></figure>

<p>它的作用是将两个 delimiter 之间的内容(document) 作为输入传递给 command。delimiter可以替换成其他字符。</p>
<p><strong>注意：</strong></p>
<ul>
<li><strong>结尾的delimiter 一定要顶格写，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。</strong></li>
<li><strong>开始的delimiter前后的空格会被忽略掉。</strong></li>
</ul>
<p>例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 计算行数</span></span><br><span class="line">wc -l &lt;&lt; EOF</span><br><span class="line">    欢迎来到</span><br><span class="line">    菜鸟教程</span><br><span class="line">    www.runoob.com</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 打印内容</span></span><br><span class="line">cat &lt;&lt; EOF</span><br><span class="line">欢迎来到</span><br><span class="line">菜鸟教程</span><br><span class="line">www.runoob.com</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h2 id="dev-null-文件"><a href="#dev-null-文件" class="headerlink" title="/dev/null 文件"></a>/dev/null 文件</h2><p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 <code>/dev/null</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command &gt; /dev/null</span><br></pre></td></tr></table></figure>

<p><code>/dev/null</code> 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 <code>/dev/null</code> 文件非常有用，将命令的输出重定向到它，会起到”禁止输出”的效果。</p>
<p>如果希望屏蔽 stdout 和 stderr，可以这样写：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ul>
<li><p><code>0</code> 是标准输入（STDIN），<code>1</code> 是标准输出（STDOUT），<code>2</code> 是标准错误输出（STDERR）。</p>
</li>
<li><p>这里的 <code>2</code> 和 <code>&gt;</code> 之间不可以有空格，<code>2&gt;</code> 是一体的时候才表示错误输出。</p>
</li>
</ul>
<h1 id="Shell-文件包含"><a href="#Shell-文件包含" class="headerlink" title="Shell 文件包含"></a>Shell 文件包含</h1><p>和其他语言一样，Shell 也可以包含外部脚本。这样可以很方便的封装一些公用的代码作为一个独立的文件。</p>
<p>Shell 文件包含的语法格式如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">. filename   # 注意点号(.)和文件名中间有一空格</span><br><span class="line"><span class="meta">#</span><span class="bash"> 或</span></span><br><span class="line">source filename</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<p>创建两个 shell 脚本文件。</p>
<p>test1.sh 代码如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line">url=&quot;http://www.runoob.com&quot;</span><br></pre></td></tr></table></figure>

<p>test2.sh 代码如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">使用 . 号来引用test1.sh 文件</span></span><br><span class="line">. ./test1.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者使用以下包含文件代码</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">source</span> ./test1.sh</span></span><br><span class="line"></span><br><span class="line">echo &quot;菜鸟教程官网地址：$url&quot;</span><br></pre></td></tr></table></figure>

<p>接下来，我们为 test2.sh 添加可执行权限并执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x test2.sh </span><br><span class="line">./test2.sh </span><br></pre></td></tr></table></figure>

<p>注：被包含的文件 test1.sh 不需要可执行权限。</p>
<h1 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h1><h2 id="source-、sh和-的区别"><a href="#source-、sh和-的区别" class="headerlink" title="source(.)、sh和./的区别"></a>source(.)、sh和./的区别</h2><blockquote>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/wangyangkobe/article/details/6595143">https://blog.csdn.net/wangyangkobe/article/details/6595143</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/pcat/p/5467188.html">https://www.cnblogs.com/pcat/p/5467188.html</a></p>
</blockquote>
<p>source命令：<br>source命令也称为“<a target="_blank" rel="noopener" href="http://www.51testing.com/?uid-225738-action-viewspace-itemid-206878">点命令</a>”，也就是一个点符号（.）,是bash的内部命令。<br>功能：使<a target="_blank" rel="noopener" href="http://www.51testing.com/?uid-225738-action-viewspace-itemid-206878">Shell</a>读入指定的Shell程序文件并依次执行文件中的所有语句<br>source命令通常用于重新执行刚修改的初始化文件，使之立即生效，而不必注销并重新登录。<br>用法：<br>source filename 或 . filename<br>source命令(从 C Shell 而来)是bash shell的内置命令;点命令(.)，就是个点符号(从Bourne Shell而来)是source的另一名称。</p>
<p>source filename 与 sh filename 及./filename执行脚本的区别在那里呢？<br>1.当shell脚本具有可执行权限时，用sh filename与./filename执行脚本是没有区别得。./filename是因为当前目录没有在PATH中，所有”.”是用来表示当前目录的。<br>2.sh filename 重新建立一个子shell，在子shell中执行脚本里面的语句，该子shell继承父shell的环境变量，但子shell新建的、改变的变量不会被带回父shell，除非使用export。<br>3.source filename：这个命令其实只是简单地读取脚本里面的语句依次在当前shell里面执行，没有建立新的子shell。那么脚本里面所有新建、改变变量的语句都会保存在当前shell里面。</p>
<p><strong>1、source</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source a.sh</span><br></pre></td></tr></table></figure>

<p>在<strong>当前shell内</strong>去读取、执行a.sh，而a.sh不需要有”<strong>执行权限</strong>“</p>
<p>source命令可以简写为”.”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">. a.sh</span><br></pre></td></tr></table></figure>

<p>注意：中间是<strong>有空格</strong>的。</p>
<p><strong>2、sh/bash</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sh a.sh</span><br><span class="line">bash a.sh</span><br></pre></td></tr></table></figure>

<p>都是<strong>打开一个subshell</strong>去读取、执行a.sh，而a.sh不需要有”<strong>执行权限</strong>“</p>
<p>通常在subshell里运行的脚本里设置变量，不会影响到父shell的。</p>
<p><strong>3、./</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;a.sh</span><br><span class="line">#bash: .&#x2F;a.sh: 权限不够</span><br><span class="line">chmod +x a.sh</span><br><span class="line">.&#x2F;a.sh</span><br></pre></td></tr></table></figure>

<p><strong>打开一个subshell</strong>去读取、执行a.sh，但a.sh需要有”<strong>执行权限</strong>“</p>
<p>可以用chmod +x添加执行权限</p>
<p>另外，使用./来执行的文件里有alias语句的话，shell并不会把alias别名扩展成对应的命令，要解决的话，得使用shopt命令来开启alias扩展选项</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shopt -s expand_aliases</span><br></pre></td></tr></table></figure>

</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-01-20T11:52:33.801Z" title="2021/1/20 下午7:52:33">2021-01-20</time>发表</span><span class="level-item"><time dateTime="2021-03-03T09:23:14.491Z" title="2021/3/3 下午5:23:14">2021-03-03</time>更新</span><span class="level-item">几秒读完 (大约27个字)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/01/20/1952.html">HTML 学习笔记</a></h1><div class="content"><h1 id="HTML模板"><a href="#HTML模板" class="headerlink" title="HTML模板"></a>HTML模板</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&lt;html&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我的第一个标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>我的第一个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://avatars.githubusercontent.com/u/52914833?s=400&amp;u=a6dbfe356f8206e4e29a7220973eca2b46fc0ab6&amp;v=4" alt="BurgessX"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">BurgessX</p><p class="is-size-6 is-block">College Student</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Shenzhen, Guangdong, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">41</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">10</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/burgessx" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/burgessx"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li><li><a class="level is-mobile" href="https://blog.zhangruipeng.me/hexo-theme-icarus/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Icarus</span></span><span class="level-right"><span class="level-item tag">blog.zhangruipeng.me</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-03-02T06:48:35.045Z">2021-03-02</time></p><p class="title"><a href="/2021/03/02/1448.html"> </a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-03-02T04:22:19.370Z">2021-03-02</time></p><p class="title"><a href="/2021/03/02/1222.html">ROS 学习笔记</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-02-28T07:33:36.257Z">2021-02-28</time></p><p class="title"><a href="/2021/02/28/1533.html">文献阅读笔记</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-02-27T15:46:00.000Z">2021-02-27</time></p><p class="title"><a href="/2021/02/27/2346.html">Linux 常用命令及相关问题</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-02-26T11:19:49.445Z">2021-02-26</time></p><p class="title"><a href="/2021/02/26/1919.html">Hello World</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/02/"><span class="level-start"><span class="level-item">二月 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">二月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">十二月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/09/"><span class="level-start"><span class="level-item">九月 2019</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Blog/"><span class="tag">Blog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Git/"><span class="tag">Git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/HTML/"><span class="tag">HTML</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ROS/"><span class="tag">ROS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SLAM/"><span class="tag">SLAM</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shell/"><span class="tag">Shell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TODO/"><span class="tag">TODO</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vim/"><span class="tag">Vim</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WIFI/"><span class="tag">WIFI</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">BurgessX</a><p class="is-size-7"><span>&copy; 2021 BurgessX</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>